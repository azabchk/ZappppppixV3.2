# render.yaml
services:
  - type: web
    name: zappppppix-api
    runtime: docker              # use runtime for Docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    autoDeploy: true
    plan: free
    healthCheckPath: /health     # your FastAPI health endpoint

    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: zappppppix-db
          property: connectionString  # injects full Postgres URL
      - key: ADMIN_TOKEN
        generateValue: true
      - key: DEFAULT_INSTRUMENTS
        value: "RUB,USD"

databases:
  - name: zappppppix-db
    plan: free
    databaseName: zappppppix
    user: zappppppix
